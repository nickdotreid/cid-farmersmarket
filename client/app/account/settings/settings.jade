div(ng-include='"components/navbar/navbar.html"')
.container
  .row
    .col-sm-12
      h1 Contact Info
    
    .col-sm-12
      form.form(name='contactInfoForm', ng-submit='changeContactInfo(contactInfoForm)', novalidate, ng-controller='SettingsCtrl', class='form-horizontal')
    
        .form-group
          label(for='fieldName', class='col-sm-2', control-label) Name
          .col-sm-4
            input(type='text', class='form-control', id='fieldName', name='name' ng-model='contactInfo.name' required, ng-model-options='{ debounce: 750 }')
          p.help-block(ng-show="contactInfoForm.name.$error.required" class="error") C'mon, don't be shy!  We need a name here.
    
        //- TODO validate that e-mail isn't already taken
        //- see https://docs.angularjs.org/guide/forms, "Custom Validation" section
        .form-group
          label(for='fieldEmail', class='col-sm-2', control-label) Email
          .col-sm-4
            input(type='email', class='form-control', id='fieldEmail', name='email' ng-model='contactInfo.email', ng-model-options='{ debounce: 750 }')
          p.help-block(ng-show="contactInfoForm.email.$error.email" class="error") This doesn't look like a valid e-mail address!
    
        .form-group
          label(for='fieldPhone', class='col-sm-2', control-label) Phone
          .col-sm-4
            input(type='text', class='form-control', id='fieldPhone', name='phone' ng-model='contactInfo.phone', ng-model-options='{ debounce: 750 }', ui-mask='(999) 999-9999')
          p.help-block(ng-show="contactInfoForm.phone.$error.mask" class="error") Keep typing!
                
        p.help-block  {{ message }}

        .form-group
          .col-sm-offset-2.col-sm-4
            button.btn.btn-lg.btn-primary(type='submit', ng-disabled="contactInfoForm.$invalid || !isChanged(contactInfo)") Save changes

  .row
    .col-sm-12
      h1 Change Password
    
    .col-sm-12
      form.form(name='passwordForm', class='form-horizontal', ng-submit='changePassword(passwordForm)', novalidate='')
        .form-group
          label(class='col-sm-2') Current Password
          .col-sm-4
            input.form-control(type='password', name='password', ng-model='user.oldPassword', mongoose-error='')
          
          p.help-block(ng-show='passwordForm.password.$error.mongoose')
            | {{ errors.other }}
    
        .form-group
          label(class='col-sm-2') New Password
          .col-sm-4
            input.form-control(type='password', name='newPassword', ng-model='user.newPassword', ng-minlength='3', required='')
    
          p.help-block(ng-show='(passwordForm.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)')
            | Password must be at least 3 characters.

        p.help-block  {{ message }}

        .form-group
          .col-sm-offset-2.col-sm-4
            button.btn.btn-lg.btn-primary(type='submit', ng-disabled="passwordForm.$invalid") Save changes
